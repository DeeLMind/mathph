import{_ as a,K as p,L as t,a5 as e,M as n,N as o,W as c,F as u}from"./framework-edebdfe1.js";const l={},i=n("h1",{id:"sol钱包开发",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#sol钱包开发","aria-hidden":"true"},"#"),o(" SOL钱包开发")],-1),k=c(`<h2 id="账户生成" tabindex="-1"><a class="header-anchor" href="#账户生成" aria-hidden="true">#</a> 账户生成</h2><ul><li>公钥私钥</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> solanaWeb3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@solana/web3.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 生成新的密钥对</span>
<span class="token keyword">const</span> keypair <span class="token operator">=</span> solanaWeb3<span class="token punctuation">.</span>Keypair<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;公钥:&quot;</span><span class="token punctuation">,</span> keypair<span class="token punctuation">.</span>publicKey<span class="token punctuation">.</span><span class="token function">toBase58</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;私钥:&quot;</span><span class="token punctuation">,</span> keypair<span class="token punctuation">.</span>secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token literal-property property">公钥</span><span class="token operator">:</span> C9ArttcScpFjwVkb7vGeqPmUs7CTQ1vHH1qNKCgw2x93
<span class="token literal-property property">私钥</span><span class="token operator">:</span> <span class="token function">Uint8Array</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>
   <span class="token number">65</span><span class="token punctuation">,</span>  <span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">171</span><span class="token punctuation">,</span>  <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">137</span><span class="token punctuation">,</span>  <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">233</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">136</span><span class="token punctuation">,</span> <span class="token number">154</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">,</span>
    <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">135</span><span class="token punctuation">,</span>  <span class="token number">32</span><span class="token punctuation">,</span>  <span class="token number">11</span><span class="token punctuation">,</span>  <span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">202</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token punctuation">,</span>  <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">152</span><span class="token punctuation">,</span>  <span class="token number">15</span><span class="token punctuation">,</span>
  <span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">164</span><span class="token punctuation">,</span>  <span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">149</span><span class="token punctuation">,</span> <span class="token number">252</span><span class="token punctuation">,</span>   <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">159</span><span class="token punctuation">,</span> <span class="token number">198</span><span class="token punctuation">,</span> <span class="token number">242</span><span class="token punctuation">,</span> <span class="token number">165</span><span class="token punctuation">,</span>
  <span class="token number">136</span><span class="token punctuation">,</span>  <span class="token number">90</span><span class="token punctuation">,</span>   <span class="token number">8</span><span class="token punctuation">,</span>  <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span>  <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">211</span><span class="token punctuation">,</span> <span class="token number">216</span><span class="token punctuation">,</span>  <span class="token number">76</span><span class="token punctuation">,</span>  <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">,</span>
  <span class="token number">155</span><span class="token punctuation">,</span>  <span class="token number">64</span><span class="token punctuation">,</span>  <span class="token number">64</span><span class="token punctuation">,</span>  <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">132</span><span class="token punctuation">,</span> <span class="token number">247</span><span class="token punctuation">,</span>  <span class="token number">67</span><span class="token punctuation">,</span>  <span class="token number">57</span><span class="token punctuation">,</span>  <span class="token number">73</span><span class="token punctuation">,</span>  <span class="token number">89</span><span class="token punctuation">,</span>
   <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">145</span><span class="token punctuation">,</span>   <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">186</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">124</span><span class="token punctuation">,</span>  <span class="token number">82</span><span class="token punctuation">,</span>  <span class="token number">54</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>助记词</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> solanaWeb3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@solana/web3.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bip39 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;bip39&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> derivePath <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;ed25519-hd-key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 生成助记词</span>
<span class="token keyword">const</span> mnemonic <span class="token operator">=</span> bip39<span class="token punctuation">.</span><span class="token function">generateMnemonic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;助记词:&quot;</span><span class="token punctuation">,</span> mnemonic<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 从助记词生成种子</span>
<span class="token keyword">const</span> seed <span class="token operator">=</span> bip39<span class="token punctuation">.</span><span class="token function">mnemonicToSeedSync</span><span class="token punctuation">(</span>mnemonic<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 Solana 的派生路径 m/44&#39;/501&#39;/0&#39;/0&#39;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token string">&quot;m/44&#39;/501&#39;/0&#39;/0&#39;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> key <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">derivePath</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> seed<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">&#39;hex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 根据派生的 seed 生成密钥对</span>
<span class="token keyword">const</span> keypair <span class="token operator">=</span> solanaWeb3<span class="token punctuation">.</span>Keypair<span class="token punctuation">.</span><span class="token function">fromSeed</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;公钥:&quot;</span><span class="token punctuation">,</span> keypair<span class="token punctuation">.</span>publicKey<span class="token punctuation">.</span><span class="token function">toBase58</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;私钥:&quot;</span><span class="token punctuation">,</span> keypair<span class="token punctuation">.</span>secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token literal-property property">助记词</span><span class="token operator">:</span> chunk view deal hen horse visual cook below dish recall awesome upgrade
<span class="token literal-property property">公钥</span><span class="token operator">:</span> Gm14JyqRqPqMr8go2myLbvB4nSX4y3toqmv1kpJCR1A6
<span class="token literal-property property">私钥</span><span class="token operator">:</span> <span class="token function">Uint8Array</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>
  <span class="token number">154</span><span class="token punctuation">,</span>  <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span>  <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">158</span><span class="token punctuation">,</span> <span class="token number">126</span><span class="token punctuation">,</span>  <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span>   <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span>  <span class="token number">41</span><span class="token punctuation">,</span>
  <span class="token number">146</span><span class="token punctuation">,</span>  <span class="token number">66</span><span class="token punctuation">,</span>  <span class="token number">47</span><span class="token punctuation">,</span>  <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">193</span><span class="token punctuation">,</span> <span class="token number">147</span><span class="token punctuation">,</span> <span class="token number">138</span><span class="token punctuation">,</span> <span class="token number">234</span><span class="token punctuation">,</span> <span class="token number">165</span><span class="token punctuation">,</span> <span class="token number">233</span><span class="token punctuation">,</span>  <span class="token number">10</span><span class="token punctuation">,</span>
   <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">134</span><span class="token punctuation">,</span> <span class="token number">136</span><span class="token punctuation">,</span>  <span class="token number">58</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">246</span><span class="token punctuation">,</span> <span class="token number">141</span><span class="token punctuation">,</span> <span class="token number">168</span><span class="token punctuation">,</span>  <span class="token number">61</span><span class="token punctuation">,</span>  <span class="token number">74</span><span class="token punctuation">,</span> <span class="token number">234</span><span class="token punctuation">,</span>
   <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">236</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">191</span><span class="token punctuation">,</span> <span class="token number">121</span><span class="token punctuation">,</span> <span class="token number">202</span><span class="token punctuation">,</span> <span class="token number">247</span><span class="token punctuation">,</span>  <span class="token number">68</span><span class="token punctuation">,</span>  <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">214</span><span class="token punctuation">,</span>  <span class="token number">26</span><span class="token punctuation">,</span>
  <span class="token number">217</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">231</span><span class="token punctuation">,</span> <span class="token number">148</span><span class="token punctuation">,</span> <span class="token number">185</span><span class="token punctuation">,</span>  <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">213</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">232</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token number">252</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span>  <span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">229</span><span class="token punctuation">,</span> <span class="token number">183</span><span class="token punctuation">,</span>  <span class="token number">31</span><span class="token punctuation">,</span>  <span class="token number">80</span><span class="token punctuation">,</span>  <span class="token number">95</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="交易信息" tabindex="-1"><a class="header-anchor" href="#交易信息" aria-hidden="true">#</a> 交易信息</h2><ul><li>获取资金</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> solanaWeb3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@solana/web3.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接到 Solana 的主网</span>
<span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">solanaWeb3<span class="token punctuation">.</span>Connection</span><span class="token punctuation">(</span>solanaWeb3<span class="token punctuation">.</span><span class="token function">clusterApiUrl</span><span class="token punctuation">(</span><span class="token string">&#39;mainnet-beta&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;confirmed&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用你的公钥创建一个公钥对象</span>
<span class="token keyword">const</span> publicKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">solanaWeb3<span class="token punctuation">.</span>PublicKey</span><span class="token punctuation">(</span><span class="token string">&quot;So11111111111111111111111111111111111111112&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查询账户余额</span>
connection<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span>publicKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">balance</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;余额:&quot;</span><span class="token punctuation">,</span> balance <span class="token operator">/</span> solanaWeb3<span class="token punctuation">.</span><span class="token constant">LAMPORTS_PER_SOL</span><span class="token punctuation">,</span> <span class="token string">&quot;SOL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>发送交易</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> solanaWeb3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@solana/web3.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接到 Solana 的主网</span>
<span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">solanaWeb3<span class="token punctuation">.</span>Connection</span><span class="token punctuation">(</span>solanaWeb3<span class="token punctuation">.</span><span class="token function">clusterApiUrl</span><span class="token punctuation">(</span><span class="token string">&#39;mainnet-beta&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;confirmed&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 从密钥创建一个 Keypair（假设你已有私钥）</span>
<span class="token keyword">const</span> secretKey <span class="token operator">=</span> Uint8Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">154</span><span class="token punctuation">,</span>  <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span>  <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">158</span><span class="token punctuation">,</span> <span class="token number">126</span><span class="token punctuation">,</span>  <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span>   <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span>  <span class="token number">41</span><span class="token punctuation">,</span>
    <span class="token number">146</span><span class="token punctuation">,</span>  <span class="token number">66</span><span class="token punctuation">,</span>  <span class="token number">47</span><span class="token punctuation">,</span>  <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">193</span><span class="token punctuation">,</span> <span class="token number">147</span><span class="token punctuation">,</span> <span class="token number">138</span><span class="token punctuation">,</span> <span class="token number">234</span><span class="token punctuation">,</span> <span class="token number">165</span><span class="token punctuation">,</span> <span class="token number">233</span><span class="token punctuation">,</span>  <span class="token number">10</span><span class="token punctuation">,</span>
     <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">134</span><span class="token punctuation">,</span> <span class="token number">136</span><span class="token punctuation">,</span>  <span class="token number">58</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">246</span><span class="token punctuation">,</span> <span class="token number">141</span><span class="token punctuation">,</span> <span class="token number">168</span><span class="token punctuation">,</span>  <span class="token number">61</span><span class="token punctuation">,</span>  <span class="token number">74</span><span class="token punctuation">,</span> <span class="token number">234</span><span class="token punctuation">,</span>
     <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">236</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">191</span><span class="token punctuation">,</span> <span class="token number">121</span><span class="token punctuation">,</span> <span class="token number">202</span><span class="token punctuation">,</span> <span class="token number">247</span><span class="token punctuation">,</span>  <span class="token number">68</span><span class="token punctuation">,</span>  <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">214</span><span class="token punctuation">,</span>  <span class="token number">26</span><span class="token punctuation">,</span>
    <span class="token number">217</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">231</span><span class="token punctuation">,</span> <span class="token number">148</span><span class="token punctuation">,</span> <span class="token number">185</span><span class="token punctuation">,</span>  <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">213</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">232</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">,</span>
    <span class="token number">252</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span>  <span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">229</span><span class="token punctuation">,</span> <span class="token number">183</span><span class="token punctuation">,</span>  <span class="token number">31</span><span class="token punctuation">,</span>  <span class="token number">80</span><span class="token punctuation">,</span>  <span class="token number">95</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> senderKeypair <span class="token operator">=</span> solanaWeb3<span class="token punctuation">.</span>Keypair<span class="token punctuation">.</span><span class="token function">fromSecretKey</span><span class="token punctuation">(</span>secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 接收者公钥（将 SOL 发送到的地址）</span>
<span class="token keyword">const</span> recipientPublicKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">solanaWeb3<span class="token punctuation">.</span>PublicKey</span><span class="token punctuation">(</span><span class="token string">&quot;Gm14JyqRqPqMr8go2myLbvB4nSX4y3toqmv1kpJCR1A6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一笔交易</span>
<span class="token keyword">const</span> transaction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">solanaWeb3<span class="token punctuation">.</span>Transaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
    solanaWeb3<span class="token punctuation">.</span>SystemProgram<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">fromPubkey</span><span class="token operator">:</span> senderKeypair<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
        <span class="token literal-property property">toPubkey</span><span class="token operator">:</span> recipientPublicKey<span class="token punctuation">,</span>
        <span class="token literal-property property">lamports</span><span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token comment">// 发送的金额，单位是 lamports，1 SOL = 1,000,000,000 lamports</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 签署并发送交易</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> signature <span class="token operator">=</span> <span class="token keyword">await</span> solanaWeb3<span class="token punctuation">.</span><span class="token function">sendAndConfirmTransaction</span><span class="token punctuation">(</span>
            connection<span class="token punctuation">,</span>
            transaction<span class="token punctuation">,</span>
            <span class="token punctuation">[</span>senderKeypair<span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;交易成功，签名:&quot;</span><span class="token punctuation">,</span> signature<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;交易失败:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="账户恢复" tabindex="-1"><a class="header-anchor" href="#账户恢复" aria-hidden="true">#</a> 账户恢复</h2><ul><li>私钥恢复</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> solanaWeb3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@solana/web3.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 假设你有一个现有的私钥</span>
<span class="token keyword">const</span> secretKey <span class="token operator">=</span> Uint8Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span>  <span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">171</span><span class="token punctuation">,</span>  <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">137</span><span class="token punctuation">,</span>  <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">233</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">136</span><span class="token punctuation">,</span> <span class="token number">154</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">,</span>
    <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">135</span><span class="token punctuation">,</span>  <span class="token number">32</span><span class="token punctuation">,</span>  <span class="token number">11</span><span class="token punctuation">,</span>  <span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">202</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token punctuation">,</span>  <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">152</span><span class="token punctuation">,</span>  <span class="token number">15</span><span class="token punctuation">,</span>
  <span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">164</span><span class="token punctuation">,</span>  <span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">149</span><span class="token punctuation">,</span> <span class="token number">252</span><span class="token punctuation">,</span>   <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">159</span><span class="token punctuation">,</span> <span class="token number">198</span><span class="token punctuation">,</span> <span class="token number">242</span><span class="token punctuation">,</span> <span class="token number">165</span><span class="token punctuation">,</span>
  <span class="token number">136</span><span class="token punctuation">,</span>  <span class="token number">90</span><span class="token punctuation">,</span>   <span class="token number">8</span><span class="token punctuation">,</span>  <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span>  <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">211</span><span class="token punctuation">,</span> <span class="token number">216</span><span class="token punctuation">,</span>  <span class="token number">76</span><span class="token punctuation">,</span>  <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">,</span>
  <span class="token number">155</span><span class="token punctuation">,</span>  <span class="token number">64</span><span class="token punctuation">,</span>  <span class="token number">64</span><span class="token punctuation">,</span>  <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">132</span><span class="token punctuation">,</span> <span class="token number">247</span><span class="token punctuation">,</span>  <span class="token number">67</span><span class="token punctuation">,</span>  <span class="token number">57</span><span class="token punctuation">,</span>  <span class="token number">73</span><span class="token punctuation">,</span>  <span class="token number">89</span><span class="token punctuation">,</span>
   <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">145</span><span class="token punctuation">,</span>   <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">186</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">124</span><span class="token punctuation">,</span>  <span class="token number">82</span><span class="token punctuation">,</span>  <span class="token number">54</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 根据私钥还原 Keypair</span>
<span class="token keyword">const</span> keypair <span class="token operator">=</span> solanaWeb3<span class="token punctuation">.</span>Keypair<span class="token punctuation">.</span><span class="token function">fromSecretKey</span><span class="token punctuation">(</span>secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;公钥:&quot;</span><span class="token punctuation">,</span> keypair<span class="token punctuation">.</span>publicKey<span class="token punctuation">.</span><span class="token function">toBase58</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;私钥:&quot;</span><span class="token punctuation">,</span> keypair<span class="token punctuation">.</span>secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>助记词恢复</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> bip39 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;bip39&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> solanaWeb3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@solana/web3.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> derivePath <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;ed25519-hd-key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 假设这是你的助记词</span>
<span class="token keyword">const</span> mnemonic <span class="token operator">=</span> <span class="token string">&quot;chunk view deal hen horse visual cook below dish recall awesome upgrade&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 从助记词生成种子</span>
<span class="token keyword">const</span> seed <span class="token operator">=</span> bip39<span class="token punctuation">.</span><span class="token function">mnemonicToSeedSync</span><span class="token punctuation">(</span>mnemonic<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 Solana 的派生路径 m/44&#39;/501&#39;/0&#39;/0&#39;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token string">&quot;m/44&#39;/501&#39;/0&#39;/0&#39;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> key <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">derivePath</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> seed<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">&#39;hex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 通过种子还原密钥对</span>
<span class="token keyword">const</span> keypair <span class="token operator">=</span> solanaWeb3<span class="token punctuation">.</span>Keypair<span class="token punctuation">.</span><span class="token function">fromSeed</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;还原的公钥:&quot;</span><span class="token punctuation">,</span> keypair<span class="token punctuation">.</span>publicKey<span class="token punctuation">.</span><span class="token function">toBase58</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;还原的私钥:&quot;</span><span class="token punctuation">,</span> keypair<span class="token punctuation">.</span>secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,15);function r(m,b){const s=u("DocsAD");return p(),t("div",null,[i,e(s),k])}const v=a(l,[["render",r],["__file","solwallet.html.vue"]]);export{v as default};
