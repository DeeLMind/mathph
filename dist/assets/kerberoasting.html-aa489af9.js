import{_ as e,K as a,L as s,W as i}from"./framework-edebdfe1.js";const n={},r=i(`<h1 id="kerberoasting攻击" tabindex="-1"><a class="header-anchor" href="#kerberoasting攻击" aria-hidden="true">#</a> Kerberoasting攻击</h1><p>Kerberoasting攻击，目的破解 Active Directory (AD) 中服务帐户的密码，攻击者伪装成具有服务主体名称 (SPN) 的帐户请求Kerberos 的票证，然后离线破解密码哈希，其实本质就是密码破解。</p><h2 id="什么是spn" tabindex="-1"><a class="header-anchor" href="#什么是spn" aria-hidden="true">#</a> 什么是SPN</h2><p>SPN（Service Principal Names）服务主体名称，为一个服务的唯一标识符，服务在加入域中时是自动注册的。整个域中的计算机上安装多个服务实例，则每个实例都必须具有自己的SPN。如果客户端可能使用多个名称进行身份验证，则给定服务实例可以具有多个SPN，使用 Kerberos 协议来认证服务，那么必须正确配置 SPN。</p><ul><li>注册在域内机器账户（Computers）</li><li>注册在域内用户账户（Users）</li></ul><div class="language-JS line-numbers-mode" data-ext="JS"><pre class="language-JS"><code>&lt;service class&gt;/&lt;host&gt;:&lt;port&gt; &lt;servername&gt;
服务类型/对应机器名:服务端口[默认端口可不写]
serviceclass/host:port/servicename
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看所有SPN</li></ul><div class="language-JS line-numbers-mode" data-ext="JS"><pre class="language-JS"><code>setspn -q */*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>查看指定域SPN</li></ul><div class="language-JS line-numbers-mode" data-ext="JS"><pre class="language-JS"><code>setspn -T deelmind.lab -q */*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>setspn -S sname/computername.domainname domain-user-account</p>`,11),l=[r];function d(t,c){return a(),s("div",null,l)}const u=e(n,[["render",d],["__file","kerberoasting.html.vue"]]);export{u as default};
